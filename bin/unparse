#!/usr/bin/env ruby

trap('INT') do |status|
  exit! 128+status
end

require 'unparser'
require 'parser/current'

ARGV.each do |file|
  source = File.read(file)
  node = Parser::CurrentRuby.parse(source)
  $stderr.puts "File: #{file}"
  $stderr.puts node.inspect
  puts Unparser.unparse(node)
end
